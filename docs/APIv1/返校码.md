## 返校码

返校码（Checking）模块，提供 2020 暑期 ~ 开学学生返校验证服务，持有返校码的学生可以进入校园。

具体流程可以简要描述为：

> 负责老师使用一个独立的后台页面添加学生（学号，姓名，学院，专业），也可以查询、修改或删除。
>
> 校门口检查的老师能看到（二维码、姓名、学号、审核时间）。
>
> 学生，在小程序上用微信注册，绑定个人身份（姓名、学号、身份证后6位）后，即可在进校园模块显示进校园二维码。

操作的资源主要有：

- /checking

## 接口

### [GET] /checking

获取审核记录列表（含筛选）

#### 权限

管理员账户

#### 参数

| 参数  | 类型   | 必填 | 释义             | 合法值 |
| ----- | ------ | ---- | ---------------- | ------ |
| q     | string | 否   | 模糊查询学生姓名 |        |
| index | int    | 否   | 页号             | 大于0  |
| count | int    | 否   | 单页条目数       | 0~50   |

#### 响应示例

```json
{
  "code": 0,
  "data": [
    {
      "id": 3,
      "uid": null,
      "studentId": "1000000001",
      "name": "测试姓名",
      "approvedTime": "2020-07-16T02:20:02.744042",
      "college": "电气",
      "major": "自动化",
      "certStatus": null
    },
  ]
}
```

### [GET] /checking/{uid}

获取用户个人审核状态

#### 权限

已登录用户

#### 参数

| 参数 | 类型 | 必填 | 释义       | 合法值 |
| ---- | ---- | ---- | ---------- | ------ |
| uid  | int  | 是   | 当前用户ID |        |

#### 响应示例

```json
{
  "code": 0,
  "data": {
    "id": 1,
    "uid": 1,
    "studentId": "10",
    "name": "姓名",
    "approvedTime": "2020-07-15T09:20:55.997402",
    "college": "学院",
    "major": null,
    "certStatus": true
  }
}
```

### [POST] /checking

新增用户审核记录

#### 权限

管理员用户

#### 参数

| 参数      | 类型   | 必填 | 释义 | 合法值 |
| --------- | ------ | ---- | ---- | ------ |
| studentId | string | 是   | 学号 |        |
| name      | string | 是   | 姓名 |        |
| college   | string | 否   | 学院 |        |
| major     | string | 否   | 专业 |        |

#### 响应示例

```json
{
  "code": 0,
  "data": {
    "id": 3,
    "uid": null,
    "studentId": "1000000001",
    "name": "测试姓名",
    "approvedTime": "2020-07-16T02:20:02.744042700",
    "college": "电气",
    "major": "自动化",
    "certStatus": false
  }
}
```

### [DELETE] /checking/{id}

删除审核记录

#### 权限

管理员用户

#### 参数

| 参数 | 类型 | 必填 | 释义   | 合法值 |
| ---- | ---- | ---- | ------ | ------ |
| id   | int  | 是   | 记录ID |        |

#### 响应示例

```json
{
  "code": 0,
}
```

## 错误代码

| 代码 | 描述                         | 类型           |
| ---- | ---------------------------- | -------------- |
| 1001 | 无审核记录或个人信息填写错误 | NoSuchRecord   |
| 1003 | 需要先实名认证               | IdentityNeeded |

